# Введение
Go - это язык программирования общего назначения, разработанный с учётом его применения для системного программирования.
Он строго типизирован, имеет сборку мусора и явную поддержку конкурентного программирования.
Программы создаются из пакетов, свойства которых позволяют эффективно управлять зависимостями.

Синтаксис языка компактен и прост в разборе, что позволяет легко проводить анализ кода с помощью автоматических инструментов,
таких как интегрированные среды разработки.

# Обозначения
Синтаксис описывается с использованием варианта расширенной формы Бэкуса-Наура (EBNF):
```
Синтаксис  = { Правило } .
Правило    = имя_правила "=" [ Выражение ] "." .
Выражение  = Вариант { "|" Вариант } .
Вариант    = Часть { Часть } .
Часть      = имя_правила | токен [ "…" токен ] | Группа | Опция | Повтор .
Группа     = "(" Выражение ")" .
Опция      = "[" Выражение "]" .
Повтор     = "{" Выражение "}" .
```
Формальное описание синтаксиса задаётся при помощи набора правил, которые могут ссылаться друг на друга. Каждое правило имеет имя и описывается выражением,
состоящим из вариантов возможных значений и операторов, имеющих следующий приоритет в порядке возрастания:
```
|   Разделение вариантов
()  Группировка
[]  Опция (0 или 1 раз)
{}  Повтор (0 или больше раз)
```
Терминал или терминальный токен — объект, непосредственно присутствующий в словах языка, соответствующего грамматике, и имеющий конкретное, неизменяемое значение.

Нетерминал или нетерминальный токен — объект, обозначающий какую-либо сущность языка (например: формула, арифметическое выражение, команда) и не имеющий конкретного символьного значения.

Если имя правила указано в нижнем регистре, то оно описывает терминальные токены.
Имена правил, описывающих нетерминалы записываются в стиле CamelCase.
Непосредственно лексические токены указываются в двойных ```""``` или обратных ``` `` ``` кавычках.

Запись ```a … b``` представляет собой набор символов от a до b в качестве альтернатив.
Горизонтальное многоточие ```…``` также используется в других местах спецификации для неформального обозначения различных перечислений или фрагментов кода, которые дополнительно не указаны.
Символ ```…``` (в отличие от отдельных трёх точек ```...```) не является токеном языка Go.

# Представление исходного кода

Исходный код представляет собой текст из символов Юникода в кодировке UTF-8.
Текст не канонизирован, поэтому одна кодовая точка с ударением отличается от того же символа, созданного путем сочетания ударения и буквы; они рассматриваются как две отдельные кодовые точки.
Для простоты в этом документе будет использоваться неквалифицированный термин *символ* для обозначения кодовой точки Юникода в исходном тексте.

Каждая кодовая точка различна; например, заглавные и строчные буквы - это разные символы.

Ограничение реализации: для совместимости с другими инструментами компилятор может запретить использование символа NUL (U+0000) в исходном тексте.

Ограничение реализации: Для совместимости с другими инструментами компилятор может игнорировать метку порядка байтов в кодировке UTF-8 (U+FEFF), если это первая кодовая точка Юникода в исходном тексте. Метка порядка байтов может быть запрещена в любом другом месте исходного кода.

## Символы

Следующие правила вводятся для обозначения определённых категорий символов Юникода:
```
новая_строка     = /* кодовая точка Юникода U+000A */ .
символ_Юникода   = /* любая кодовая точка Юникода за исключением новой строки */ .
буква_Юникода    = /* кодовая точка Юникода из категории "Буквы" */ .
цифра_Юникода    = /* кодовая точка Юникода из категории "Числа, десятичные цифры" */ .
```
В стандарте Юникода версии 8.0 раздел 4.5 «Общая категория» определяет набор категорий символов.
Go обрабатывает все символы в любой из категорий «Буквы» (```Lu```, ```Ll```, ```Lt```, ```Lm``` или ```Lo```) как буквы Юникода, а из категории «Числа» ```Nd``` - как цифры Юникода.

## Буквы и цифры

Символ подчеркивания ```_``` (```U+005F```) считается строчной буквой.

```
буква                   = буква_Юникода | "_" .
десятичная_цифра        = "0" … "9" .
двоичная_цифра          = "0" | "1" .
восьмеричная_цифра      = "0" … "7" .
шестнадцатеричная_цифра = "0" … "9" | "A" … "F" | "a" … "f" .
```

# Лексические элементы
## Комментарии
Комментарии служат программной документацией. Есть две формы:
1. Однострочные комментарии начинаются с последовательности символов ```//``` и заканчиваются в конце строки.
2. Общие комментарии начинаются с последовательности символов ```/*``` и заканчиваются первой найденной далее последовательностью ```*/```.

Комментарий не может начинаться внутри литерала руны или строки, а также внутри другого комментария.
Общий комментарий, не содержащий новых строк, в коде считается равным одному пробелу. Любой другой комментарий действует как переход на новую строку.

## Токены
Токены формируют лексику языка Go. Есть четыре класса токенов:
1. Идентификаторы
2. Ключевые слова
3. Операторы и знаки пунктуации
4. Литералы

Пустое пространство, которое может состоять из пробелов (```U+0020```), горизонтальных табуляций (```U+0009```), символов возврата каретки (```U+000D```) и переводов строки (```U+000A```), игнорируется,
за исключением случаев, когда при помощи него разделяются токены, которые иначе были бы объединены в один токен. Однако, перевод строки или конец файла могут вызывать вставку точки с запятой.
При разбиении входных данных на токены следующий токен - это самая длинная последовательность символов, которая образует допустимый токен.

## Точки с запятой

Формальный синтаксис использует точки с запятой ```;``` в качестве признака конца в некоторых конструкциях языка.
В программах на Go в большинстве случаев можно опускать точки с запятой, используя следующие два правила:
1. Когда исходный код разбивается на токены, точка с запятой автоматически вставляется после конечного токена в строке, если этот токен является:


   - идентификатором
   - литералом руны, строки или числа (целого, с плавающей точкой или комплексного)
   - одним из ключевых слов - ```break```, ```continue```, ```fallthrough```, или ```return```
   - одним из операторов и знаков пунктуации - ```++```, ```--```, ```)```, ```]```, или ```}```

   
3. Чтобы сложные инструкции могли быть размещены в одной строке,
   точку с запятой можно опустить перед ```)``` или ```}```.
   
Чтобы отразить идиоматичное использование, в примерах кода далее опускаются точки с запятой, согласно правилам выше.

## Идентификаторы

Идентификаторы обозначают сущности в коде программы, такие как переменные и типы.
Идентификатор - это последовательность из одной или нескольких букв и цифр.
Первым символом в идентификаторе должна быть буква.

```
идентификатор = буква { буква | цифра_Юникода } .
```

```
a
_x9
ThisVariableIsExported
αβ
курлык
```

Некоторые идентификаторы являются предварительно объявленными.

## Ключевые слова

Следующие ключевые слова зарезервированы и не могут использоваться в качестве идентификаторов.

```
break        default      func         interface    select
case         defer        go           map          struct
chan         else         goto         package      switch
const        fallthrough  if           range        type
continue     for          import       return       var
```

## Операторы и знаки пунктуации

Следующие последовательности символов представляют операторы (включая операторы присваивания) и знаки пунктуации:
```
+    &     +=    &=     &&    ==    !=    (    )
-    |     -=    |=     ||    <     <=    [    ]
*    ^     *=    ^=     <-    >     >=    {    }
/    <<    /=    <<=    ++    =     :=    ,    ;
%    >>    %=    >>=    --    !     ...   .    :
     &^          &^=          ~
```

## Целочисленные литералы

Целочисленный литерал - это последовательность цифр, представляющая целочисленную константу.
Необязательный префикс задает систему счисления, отличную от десятичной: ```0b``` или ```0B``` для двоичного числа, ```0```, ```0o``` или ```0O``` для восьмеричного и ```0x``` или ```0X``` для шестнадцатеричного.
Одиночный ```0``` считается десятичным нулём.
В шестнадцатеричных литералах буквы от ```a``` до ```f``` и от ```A``` до ```F``` представляют значения от ```10``` до ```15```.


Для удобства чтения символ подчёркивания (```_```) может появляться после префикса или между цифрами числа; такие подчёркивания не изменяют значение литерала.

```
целочисленный_литерал      = десятичный_литерал | двоичный_литерал | восьмеричный_литерал | шестнадцатеричный_литерал .
десятичный_литерал         = "0" | ( "1" … "9" ) [ [ "_" ] десятичные_цифры ] .
двоичный_литерал           = "0" ( "b" | "B" ) [ "_" ] двоичные_цифры .
восьмеричный_литерал       = "0" [ "o" | "O" ] [ "_" ] восьмеричные_цифры .
шестнадцатеричный_литерал  = "0" ( "x" | "X" ) [ "_" ] шестнадцатеричные_цифры .

десятичные_цифры           = десятичная_цифра { [ "_" ] десятичная_цифра } .
двоичные_цифры             = двоичная_цифра { [ "_" ] двоичная_цифра } .
восьмеричные_цифры         = восьмеричная_цифра { [ "_" ] восьмеричная_цифра } .
шестнадцатеричные_цифры    = шестнадцатеричная_цифра { [ "_" ] шестнадцатеричная_цифра } .
```

```
42
4_2
0600
0_600
0o600
0O600       // второй символ - заглавная латинская 'O'
0xBadFace
0xBad_Face
0x_67_7a_2f_cc_40_c6
170141183460469231731687303715884105727
170_141183_460469_231731_687303_715884_105727

_42         // является идентификатором, а не целочисленным литералом
42_         // неверно: после _ должна идти цифра
4__2        // неверно: несколько _ подряд не допускаются
0_xBadFace  // неверно: можно указать _ только после префикса или между цифрами
```

## Литералы с плавающей точкой

Литерал с плавающей точкой - это десятичное или шестнадцатеричное представление константы с плавающей точкой.


Десятичный литерал с плавающей точкой состоит из целой части (десятичные цифры), десятичной точки, дробной части (десятичные цифры) и 
экспоненциальной части (```e``` или ```E```, за которыми следуют необязательный знак ```+``` или ```-``` и десятичные цифры).
Если значение экспоненты равно x, мантисса (число, состоящее из целой и дробной части) умножается на $10^x$.

Для краткости записи можно опускать:
- Только целую часть (```.145e+23```)
- Только дробную часть (```96.e5```)
- Только экспоненциальную часть (```41.02```)
- Одновременно десятичную точку и дробную часть  (```10e-32```)
- Одновременно целую и экспоненциальную части (```.385```)
- Одновременно дробную и экспоненциальную части (```24.```)
  
Шестнадцатеричный литерал с плавающей точкой состоит из префикса ```0x``` или ```0X```, целой части (шестнадцатеричные цифры), точки основания,
дробной части (шестнадцатеричные цифры) и экспоненциальной части
(```p``` или ```P```, за которыми следуют необязательный знак ```+``` или ```-``` и десятичные цифры).
Если значение экспоненты (указывается в десятичной системе счисления) равно x, мантисса (число, состоящее из целой и дробной части) умножается на $2^x$.

Для краткости записи можно опускать:
- Только целую часть (```0x.8fp23```)
- Только дробную часть (```0x67.p06```)
- Одновременно точку основания и дробную часть (```0xe2p17```)


Экспоненциальная часть обязательно должна присутствовать в шестнадцатеричном дробном литерале. Этот синтаксис соответствует приведенному в IEEE 754-2008 §5.12.3.

Для удобства чтения символ подчёркивания (```_```) может появляться после префикса или между цифрами числа; такие подчёркивания не изменяют значение литерала.

```
дробный_литерал                    = десятичный_дробный_литерал | шестнадцатеричный_дробный_литерал .

десятичный_дробный_литерал         = десятичные_цифры "." [ десятичные_цифры ] [ десятичная_экспонента ] |
                                   десятичные_цифры десятичная_экспонента | "." десятичные_цифры [ десятичная_экспонента ] .

десятичная_экспонента              = ( "e" | "E" ) [ "+" | "-" ] десятичные_цифры .


шестнадцатеричный_дробный_литерал  = "0" ( "x" | "X" ) шестнадцатеричная_мантисса шестнадцатеричная_экспонента .

шестнадцатеричная_мантисса         = [ "_" ] шестнадцатеричные_цифры "." [ шестнадцатеричные_цифры ] |
                                     [ "_" ] шестнадцатеричные_цифры | "." шестнадцатеричные_цифры .

шестнадцатеричная_экспонента       = ( "p" | "P" ) [ "+" | "-" ] десятичные_цифры .
```




















